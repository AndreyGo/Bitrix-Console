<?php// IncludeModuleLangFile(__FILE__);/** * Основной класс работы Битрикс Консоли * [command] [action] [value] [params] * Дефолтовые команды одним словом * 	 pwd - Текущая директория *   version - Текущая версия консоли * 	 bversion - Текущая версия битрикса * 	 help - Вывод справки * 	 login - Под каким логином производятся текущие действия *   author - Автор проекта *   dir, ls - Список файлов и папок текущей папка *  * @author Andrey * */class CBConsole{	/**	 * Текущая директория	 * @var str	 */	var $pwd;		/**	 * Корневая папка сайта	 * @var str	 */	var $rootPath;		/**	 * Логин пользователя	 * @var str	 */	var $bitrixUser;		/**	 * Пароль пользоваетля	 * @var str	 */	var $bitrixPassword;		/**	 * ID сессии	 * @var str	 */	var $bitrixSession;		/**	 * Команда	 * @var str	 */	var $command;		/**	 * Действие	 * @var str	 */
	var $action;		/**	 * Значение	 * @var mixed	 */	var $value;		/**	 * Параметры	 * @var str	 */	var $params;		/**	 * Массив параметров ([параметр] => [значение])	 * @var array	 */	var $arParams = array();		/**	 * Результат выполнения команды	 * @var str	 */	var $output;		/**	 * Присланная строка	 * @var str	 */	var $strValue;		/**	 * Список системных команд	 */	var $arSystem = array();		/**	 * Версия текущей консоли	 */	var $version = '1.0.0b';		/**	 * Конструктор	 */	function CBConsole()	{		$this->pwd = './';		$this->rootPath = $_SERVER['DOCUMENT_ROOT'];		$this->bitrixUser = '';		$this->bitrixPassword = '';		$this->bitrixSession = '';		$this->arSystem = array(			'pwd', // Текущая директория
			'version', // Текущая версия консоли
			'bversion', // Текущая версия битрикса
			'help', // Вывод справки
			'login', // Под каким логином производятся текущие действия
			'author', // Автор проекта
			'ls' // Список файлов и папок текущей папка				);			}		/**	 * Главный метод класса, который выполняет строку :)	 * @param str $strValue	 */	function run($strValue)	{		// Запоминаем команду		$this->strValue = trim($strValue);				// Если это системная команда то выполняем её отдельно		if ($this->SysCommand()) {			$this->output = $this->RunSysCommand();			return $this->output; 		}		$this->output = 'To be continue ...';	}	/**	 * Проверяем, является ли данная команда системной	 */	function SysCommand()	{		return in_array($this->strValue,$this->arSystem);		}		function RunSysCommand()	{		switch ($this->strValue)		{			case 'pwd':				return $this->pwd;			break;						case 'version':				return 'Version of Bitrix console ' . $this->version;			break;						case 'bversion':				return 'Version of 1C-Bitrix ' . SM_VERSION;			break;						case 'login':				global $USER;				return 'User ' . $USER->GetLogin();			break;						case 'author':				return 'Author of this project is Slashinin Andrey Aleksandrovich (slashinin.andrey@gmail.com)';			break;						case 'ls':			case 'dir':				return 'In coming soon';			break;		}			}}?>